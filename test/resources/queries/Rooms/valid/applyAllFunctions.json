{
	"title": "valid-Rooms-Nested filters with full apply",
	"input": {
		"WHERE": {
			"AND": [
				{
					"OR": [
						{
							"IS": {
								"rooms_furniture": "*Movable*"
							}
						},
						{
							"IS": {
								"rooms_type": "*Lab*"
							}
						}
					]
				},
				{
					"NOT": {
						"LT": {
							"rooms_seats": 20
						}
					}
				}
			]
		},
		"OPTIONS": {
			"COLUMNS": [
				"rooms_shortname",
				"rooms_type",
				"minSeats",
				"maxSeats",
				"avgSeats",
				"sumSeats",
				"uniqueTypes"
			],
			"ORDER": {
				"dir": "UP",
				"keys": [
					"rooms_shortname",
					"uniqueTypes",
					"avgSeats"
				]
			}
		},
		"TRANSFORMATIONS": {
			"GROUP": [
				"rooms_shortname",
				"rooms_type"
			],
			"APPLY": [
				{
					"minSeats": {
						"MIN": "rooms_seats"
					}
				},
				{
					"maxSeats": {
						"MAX": "rooms_seats"
					}
				},
				{
					"avgSeats": {
						"AVG": "rooms_seats"
					}
				},
				{
					"sumSeats": {
						"SUM": "rooms_seats"
					}
				},
				{
					"uniqueTypes": {
						"COUNT": "rooms_type"
					}
				}
			]
		}
	},
	"errorExpected": false,
	"expected": [
		{
			"rooms_shortname": "ALRD",
			"rooms_type": "Open Design General Purpose",
			"minSeats": 20,
			"maxSeats": 44,
			"avgSeats": 28,
			"sumSeats": 84,
			"uniqueTypes": 1
		},
		{
			"rooms_shortname": "ALRD",
			"rooms_type": "Case Style",
			"minSeats": 50,
			"maxSeats": 94,
			"avgSeats": 72,
			"sumSeats": 144,
			"uniqueTypes": 1
		},
		{
			"rooms_shortname": "ANGU",
			"rooms_type": "Small Group",
			"minSeats": 20,
			"maxSeats": 35,
			"avgSeats": 27.5,
			"sumSeats": 55,
			"uniqueTypes": 1
		},
		{
			"rooms_shortname": "ANGU",
			"rooms_type": "TBD",
			"minSeats": 32,
			"maxSeats": 32,
			"avgSeats": 32,
			"sumSeats": 32,
			"uniqueTypes": 1
		},
		{
			"rooms_shortname": "ANGU",
			"rooms_type": "Case Style",
			"minSeats": 41,
			"maxSeats": 60,
			"avgSeats": 49.38,
			"sumSeats": 395,
			"uniqueTypes": 1
		},
		{
			"rooms_shortname": "ANGU",
			"rooms_type": "Open Design General Purpose",
			"minSeats": 32,
			"maxSeats": 80,
			"avgSeats": 51.67,
			"sumSeats": 310,
			"uniqueTypes": 1
		},
		{
			"rooms_shortname": "ANGU",
			"rooms_type": "Tiered Large Group",
			"minSeats": 44,
			"maxSeats": 260,
			"avgSeats": 88.25,
			"sumSeats": 706,
			"uniqueTypes": 1
		},
		{
			"rooms_shortname": "ANSO",
			"rooms_type": "Small Group",
			"minSeats": 26,
			"maxSeats": 26,
			"avgSeats": 26,
			"sumSeats": 26,
			"uniqueTypes": 1
		},
		{
			"rooms_shortname": "AUDX",
			"rooms_type": "Small Group",
			"minSeats": 20,
			"maxSeats": 21,
			"avgSeats": 20.5,
			"sumSeats": 41,
			"uniqueTypes": 1
		},
		{
			"rooms_shortname": "BIOL",
			"rooms_type": "Tiered Large Group",
			"minSeats": 76,
			"maxSeats": 76,
			"avgSeats": 76,
			"sumSeats": 76,
			"uniqueTypes": 1
		},
		{
			"rooms_shortname": "BRKX",
			"rooms_type": "Open Design General Purpose",
			"minSeats": 24,
			"maxSeats": 24,
			"avgSeats": 24,
			"sumSeats": 24,
			"uniqueTypes": 1
		},
		{
			"rooms_shortname": "BRKX",
			"rooms_type": "Tiered Large Group",
			"minSeats": 70,
			"maxSeats": 70,
			"avgSeats": 70,
			"sumSeats": 70,
			"uniqueTypes": 1
		},
		{
			"rooms_shortname": "BUCH",
			"rooms_type": "Small Group",
			"minSeats": 22,
			"maxSeats": 32,
			"avgSeats": 28.05,
			"sumSeats": 617,
			"uniqueTypes": 1
		},
		{
			"rooms_shortname": "BUCH",
			"rooms_type": "Open Design General Purpose",
			"minSeats": 26,
			"maxSeats": 50,
			"avgSeats": 41.53,
			"sumSeats": 706,
			"uniqueTypes": 1
		},
		{
			"rooms_shortname": "BUCH",
			"rooms_type": "Tiered Large Group",
			"minSeats": 65,
			"maxSeats": 78,
			"avgSeats": 68.25,
			"sumSeats": 273,
			"uniqueTypes": 1
		},
		{
			"rooms_shortname": "BUCH",
			"rooms_type": "Case Style",
			"minSeats": 65,
			"maxSeats": 78,
			"avgSeats": 71.5,
			"sumSeats": 143,
			"uniqueTypes": 1
		},
		{
			"rooms_shortname": "CEME",
			"rooms_type": "Small Group",
			"minSeats": 22,
			"maxSeats": 26,
			"avgSeats": 24,
			"sumSeats": 48,
			"uniqueTypes": 1
		},
		{
			"rooms_shortname": "CEME",
			"rooms_type": "Case Style",
			"minSeats": 34,
			"maxSeats": 62,
			"avgSeats": 47,
			"sumSeats": 141,
			"uniqueTypes": 1
		},
		{
			"rooms_shortname": "CHBE",
			"rooms_type": "Open Design General Purpose",
			"minSeats": 60,
			"maxSeats": 60,
			"avgSeats": 60,
			"sumSeats": 60,
			"uniqueTypes": 1
		},
		{
			"rooms_shortname": "CHBE",
			"rooms_type": "Tiered Large Group",
			"minSeats": 94,
			"maxSeats": 200,
			"avgSeats": 147,
			"sumSeats": 294,
			"uniqueTypes": 1
		},
		{
			"rooms_shortname": "DMP",
			"rooms_type": "Small Group",
			"minSeats": 40,
			"maxSeats": 40,
			"avgSeats": 40,
			"sumSeats": 80,
			"uniqueTypes": 1
		},
		{
			"rooms_shortname": "DMP",
			"rooms_type": "Tiered Large Group",
			"minSeats": 80,
			"maxSeats": 160,
			"avgSeats": 120,
			"sumSeats": 360,
			"uniqueTypes": 1
		},
		{
			"rooms_shortname": "EOSM",
			"rooms_type": "Open Design General Purpose",
			"minSeats": 50,
			"maxSeats": 50,
			"avgSeats": 50,
			"sumSeats": 50,
			"uniqueTypes": 1
		},
		{
			"rooms_shortname": "ESB",
			"rooms_type": "Tiered Large Group",
			"minSeats": 80,
			"maxSeats": 80,
			"avgSeats": 80,
			"sumSeats": 80,
			"uniqueTypes": 1
		},
		{
			"rooms_shortname": "FNH",
			"rooms_type": "Small Group",
			"minSeats": 27,
			"maxSeats": 28,
			"avgSeats": 27.5,
			"sumSeats": 55,
			"uniqueTypes": 1
		},
		{
			"rooms_shortname": "FNH",
			"rooms_type": "Open Design General Purpose",
			"minSeats": 43,
			"maxSeats": 54,
			"avgSeats": 48.5,
			"sumSeats": 97,
			"uniqueTypes": 1
		},
		{
			"rooms_shortname": "FORW",
			"rooms_type": "Small Group",
			"minSeats": 35,
			"maxSeats": 44,
			"avgSeats": 39.5,
			"sumSeats": 79,
			"uniqueTypes": 1
		},
		{
			"rooms_shortname": "FORW",
			"rooms_type": "Open Design General Purpose",
			"minSeats": 63,
			"maxSeats": 63,
			"avgSeats": 63,
			"sumSeats": 63,
			"uniqueTypes": 1
		},
		{
			"rooms_shortname": "FRDM",
			"rooms_type": "Tiered Large Group",
			"minSeats": 160,
			"maxSeats": 160,
			"avgSeats": 160,
			"sumSeats": 160,
			"uniqueTypes": 1
		},
		{
			"rooms_shortname": "FSC",
			"rooms_type": "Small Group",
			"minSeats": 20,
			"maxSeats": 36,
			"avgSeats": 24.8,
			"sumSeats": 124,
			"uniqueTypes": 1
		},
		{
			"rooms_shortname": "FSC",
			"rooms_type": "Case Style",
			"minSeats": 65,
			"maxSeats": 65,
			"avgSeats": 65,
			"sumSeats": 130,
			"uniqueTypes": 1
		},
		{
			"rooms_shortname": "GEOG",
			"rooms_type": "Open Design General Purpose",
			"minSeats": 42,
			"maxSeats": 100,
			"avgSeats": 66.8,
			"sumSeats": 334,
			"uniqueTypes": 1
		},
		{
			"rooms_shortname": "HEBB",
			"rooms_type": "Open Design General Purpose",
			"minSeats": 54,
			"maxSeats": 54,
			"avgSeats": 54,
			"sumSeats": 162,
			"uniqueTypes": 1
		},
		{
			"rooms_shortname": "HENN",
			"rooms_type": "Small Group",
			"minSeats": 30,
			"maxSeats": 36,
			"avgSeats": 32,
			"sumSeats": 96,
			"uniqueTypes": 1
		},
		{
			"rooms_shortname": "IBLC",
			"rooms_type": "Small Group",
			"minSeats": 24,
			"maxSeats": 40,
			"avgSeats": 27.67,
			"sumSeats": 166,
			"uniqueTypes": 1
		},
		{
			"rooms_shortname": "IBLC",
			"rooms_type": "Case Style",
			"minSeats": 50,
			"maxSeats": 50,
			"avgSeats": 50,
			"sumSeats": 50,
			"uniqueTypes": 1
		},
		{
			"rooms_shortname": "IBLC",
			"rooms_type": "Open Design General Purpose",
			"minSeats": 112,
			"maxSeats": 112,
			"avgSeats": 112,
			"sumSeats": 112,
			"uniqueTypes": 1
		},
		{
			"rooms_shortname": "IONA",
			"rooms_type": "Open Design General Purpose",
			"minSeats": 50,
			"maxSeats": 50,
			"avgSeats": 50,
			"sumSeats": 50,
			"uniqueTypes": 1
		},
		{
			"rooms_shortname": "IONA",
			"rooms_type": "Case Style",
			"minSeats": 100,
			"maxSeats": 100,
			"avgSeats": 100,
			"sumSeats": 100,
			"uniqueTypes": 1
		},
		{
			"rooms_shortname": "LASR",
			"rooms_type": "Small Group",
			"minSeats": 20,
			"maxSeats": 20,
			"avgSeats": 20,
			"sumSeats": 40,
			"uniqueTypes": 1
		},
		{
			"rooms_shortname": "LASR",
			"rooms_type": "Open Design General Purpose",
			"minSeats": 51,
			"maxSeats": 51,
			"avgSeats": 51,
			"sumSeats": 51,
			"uniqueTypes": 1
		},
		{
			"rooms_shortname": "LSC",
			"rooms_type": "Tiered Large Group",
			"minSeats": 125,
			"maxSeats": 350,
			"avgSeats": 275,
			"sumSeats": 825,
			"uniqueTypes": 1
		},
		{
			"rooms_shortname": "LSK",
			"rooms_type": "Open Design General Purpose",
			"minSeats": 42,
			"maxSeats": 75,
			"avgSeats": 58.5,
			"sumSeats": 117,
			"uniqueTypes": 1
		},
		{
			"rooms_shortname": "MATH",
			"rooms_type": "Small Group",
			"minSeats": 25,
			"maxSeats": 60,
			"avgSeats": 38.33,
			"sumSeats": 115,
			"uniqueTypes": 1
		},
		{
			"rooms_shortname": "MATH",
			"rooms_type": "Open Design General Purpose",
			"minSeats": 30,
			"maxSeats": 48,
			"avgSeats": 39,
			"sumSeats": 156,
			"uniqueTypes": 1
		},
		{
			"rooms_shortname": "MCLD",
			"rooms_type": "Small Group",
			"minSeats": 40,
			"maxSeats": 40,
			"avgSeats": 40,
			"sumSeats": 40,
			"uniqueTypes": 1
		},
		{
			"rooms_shortname": "MCLD",
			"rooms_type": "Open Design General Purpose",
			"minSeats": 60,
			"maxSeats": 84,
			"avgSeats": 68,
			"sumSeats": 204,
			"uniqueTypes": 1
		},
		{
			"rooms_shortname": "MCML",
			"rooms_type": "Small Group",
			"minSeats": 24,
			"maxSeats": 32,
			"avgSeats": 29.33,
			"sumSeats": 88,
			"uniqueTypes": 1
		},
		{
			"rooms_shortname": "MCML",
			"rooms_type": "Open Design General Purpose",
			"minSeats": 47,
			"maxSeats": 47,
			"avgSeats": 47,
			"sumSeats": 47,
			"uniqueTypes": 1
		},
		{
			"rooms_shortname": "MCML",
			"rooms_type": "Case Style",
			"minSeats": 72,
			"maxSeats": 72,
			"avgSeats": 72,
			"sumSeats": 72,
			"uniqueTypes": 1
		},
		{
			"rooms_shortname": "MGYM",
			"rooms_type": "Open Design General Purpose",
			"minSeats": 25,
			"maxSeats": 40,
			"avgSeats": 32.5,
			"sumSeats": 65,
			"uniqueTypes": 1
		},
		{
			"rooms_shortname": "ORCH",
			"rooms_type": "Active Learning",
			"minSeats": 25,
			"maxSeats": 25,
			"avgSeats": 25,
			"sumSeats": 100,
			"uniqueTypes": 1
		},
		{
			"rooms_shortname": "ORCH",
			"rooms_type": "Open Design General Purpose",
			"minSeats": 25,
			"maxSeats": 72,
			"avgSeats": 36.75,
			"sumSeats": 147,
			"uniqueTypes": 1
		},
		{
			"rooms_shortname": "ORCH",
			"rooms_type": "Studio Lab",
			"minSeats": 48,
			"maxSeats": 72,
			"avgSeats": 60,
			"sumSeats": 120,
			"uniqueTypes": 1
		},
		{
			"rooms_shortname": "OSBO",
			"rooms_type": "Small Group",
			"minSeats": 39,
			"maxSeats": 40,
			"avgSeats": 39.5,
			"sumSeats": 79,
			"uniqueTypes": 1
		},
		{
			"rooms_shortname": "OSBO",
			"rooms_type": "Open Design General Purpose",
			"minSeats": 442,
			"maxSeats": 442,
			"avgSeats": 442,
			"sumSeats": 442,
			"uniqueTypes": 1
		},
		{
			"rooms_shortname": "PCOH",
			"rooms_type": "Small Group",
			"minSeats": 24,
			"maxSeats": 24,
			"avgSeats": 24,
			"sumSeats": 120,
			"uniqueTypes": 1
		},
		{
			"rooms_shortname": "PCOH",
			"rooms_type": "Open Design General Purpose",
			"minSeats": 40,
			"maxSeats": 40,
			"avgSeats": 40,
			"sumSeats": 120,
			"uniqueTypes": 1
		},
		{
			"rooms_shortname": "PHRM",
			"rooms_type": "Open Design General Purpose",
			"minSeats": 72,
			"maxSeats": 72,
			"avgSeats": 72,
			"sumSeats": 72,
			"uniqueTypes": 1
		},
		{
			"rooms_shortname": "PHRM",
			"rooms_type": "Tiered Large Group",
			"minSeats": 167,
			"maxSeats": 236,
			"avgSeats": 201.5,
			"sumSeats": 403,
			"uniqueTypes": 1
		},
		{
			"rooms_shortname": "SCRF",
			"rooms_type": "Small Group",
			"minSeats": 20,
			"maxSeats": 60,
			"avgSeats": 33.89,
			"sumSeats": 644,
			"uniqueTypes": 1
		},
		{
			"rooms_shortname": "SOWK",
			"rooms_type": "Open Design General Purpose",
			"minSeats": 29,
			"maxSeats": 68,
			"avgSeats": 39.25,
			"sumSeats": 157,
			"uniqueTypes": 1
		},
		{
			"rooms_shortname": "SPPH",
			"rooms_type": "Small Group",
			"minSeats": 28,
			"maxSeats": 30,
			"avgSeats": 29,
			"sumSeats": 58,
			"uniqueTypes": 1
		},
		{
			"rooms_shortname": "SPPH",
			"rooms_type": "Open Design General Purpose",
			"minSeats": 66,
			"maxSeats": 66,
			"avgSeats": 66,
			"sumSeats": 66,
			"uniqueTypes": 1
		},
		{
			"rooms_shortname": "SRC",
			"rooms_type": "TBD",
			"minSeats": 299,
			"maxSeats": 299,
			"avgSeats": 299,
			"sumSeats": 897,
			"uniqueTypes": 1
		},
		{
			"rooms_shortname": "SWNG",
			"rooms_type": "Small Group",
			"minSeats": 27,
			"maxSeats": 27,
			"avgSeats": 27,
			"sumSeats": 189,
			"uniqueTypes": 1
		},
		{
			"rooms_shortname": "SWNG",
			"rooms_type": "Open Design General Purpose",
			"minSeats": 47,
			"maxSeats": 47,
			"avgSeats": 47,
			"sumSeats": 423,
			"uniqueTypes": 1
		},
		{
			"rooms_shortname": "SWNG",
			"rooms_type": "Tiered Large Group",
			"minSeats": 187,
			"maxSeats": 190,
			"avgSeats": 188.75,
			"sumSeats": 755,
			"uniqueTypes": 1
		},
		{
			"rooms_shortname": "UCLL",
			"rooms_type": "Small Group",
			"minSeats": 30,
			"maxSeats": 30,
			"avgSeats": 30,
			"sumSeats": 30,
			"uniqueTypes": 1
		},
		{
			"rooms_shortname": "UCLL",
			"rooms_type": "Studio Lab",
			"minSeats": 30,
			"maxSeats": 30,
			"avgSeats": 30,
			"sumSeats": 30,
			"uniqueTypes": 1
		},
		{
			"rooms_shortname": "UCLL",
			"rooms_type": "Open Design General Purpose",
			"minSeats": 48,
			"maxSeats": 55,
			"avgSeats": 51.5,
			"sumSeats": 103,
			"uniqueTypes": 1
		},
		{
			"rooms_shortname": "WOOD",
			"rooms_type": "Small Group",
			"minSeats": 21,
			"maxSeats": 30,
			"avgSeats": 27,
			"sumSeats": 81,
			"uniqueTypes": 1
		},
		{
			"rooms_shortname": "WOOD",
			"rooms_type": "Tiered Large Group",
			"minSeats": 88,
			"maxSeats": 120,
			"avgSeats": 112,
			"sumSeats": 448,
			"uniqueTypes": 1
		}
	]
}
